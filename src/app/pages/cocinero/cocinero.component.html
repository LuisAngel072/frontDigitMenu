<div class="container mt-4">
  <!-- Título principal -->
  <div class="row mb-4">
    <div class="col text-center">
      <h1>Pedidos Pendientes</h1>
    </div>
  </div>

  <!-- Verificar si hay pedidos con detalle -->
  <div *ngIf="pedidosConDetalle && pedidosConDetalle.length > 0; else noData">
    <div class="row">
      <div class="col-md-6 mb-4" *ngFor="let detalle of pedidosConDetalle">
        <div class="card">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">
              Pedido #{{ detalle.pedido_id.id_pedido }} - Mesa {{ detalle.pedido_id.no_mesa.no_mesa }}
            </h5>
          </div>
          <div class="card-body">
            <p><strong>Fecha:</strong> {{ detalle.pedido_id.fecha_pedido | date:'dd/MM/yyyy HH:mm' }}</p>
            <p><strong>Producto:</strong> {{ detalle.producto_id.nombre_prod }}</p>
            <p><strong>Opción:</strong> {{ detalle.opcion_id.nombre_opcion }}</p>
            <p><strong>Estado:</strong> 
              <span class="badge"
                [ngClass]="{
                  'bg-warning': detalle.estado === 'Sin preparar',
                  'bg-success': detalle.estado === 'Preparado',
                  'bg-info': detalle.estado === 'Entregado',
                  'bg-secondary': detalle.estado === 'Pagado'
                }">
                {{ detalle.estado }}
              </span>
            </p>
            <p><strong>Precio total:</strong> ${{ detalle.precio }}</p>

            <div *ngIf="detalle.extras && detalle.extras.length > 0">
              <h6>Extras:</h6>
              <ul>
                <li *ngFor="let extra of detalle.extras">
                  {{ extra.nombre_extra }} - ${{ extra.precio }}
                </li>
              </ul>
            </div>

            <div *ngIf="detalle.ingredientes && detalle.ingredientes.length > 0">
              <h6>Ingredientes:</h6>
              <ul>
                <li *ngFor="let ingr of detalle.ingredientes">
                  {{ ingr.nombre_ingrediente }} - ${{ ingr.precio }}
                </li>
              </ul>
            </div>

            <button *ngIf="detalle.estado !== 'Preparado'"
                    class="btn btn-success w-100 mt-2"
                    (click)="marcarComoElaborado(detalle.pedido_id.id_pedido)">
              Marcar como elaborado
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Template para mostrar mensaje si no hay datos -->
  <ng-template #noData>
    <div class="alert alert-warning text-center" role="alert">
      No hay pedidos disponibles en este momento.
    </div>
  </ng-template>
</div>
